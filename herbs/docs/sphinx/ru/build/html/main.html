
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Администрирование электронного гербария БСИ ДВО РАН &#8212; Документация Электронный гербарий </title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="Алфавитный указатель" href="genindex.html" />
    <link rel="search" title="Поиск" href="search.html" />
    <link rel="next" title="Подготовка и загрузка гербарных изображений" href="scanning.html" />
    <link rel="prev" title="Автоматизация поиска гербарных записей в базе данных" href="http_api.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Навигация</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Алфавитный указатель"
             accesskey="I">указатель</a></li>
        <li class="right" >
          <a href="scanning.html" title="Подготовка и загрузка гербарных изображений"
             accesskey="N">вперёд</a> |</li>
        <li class="right" >
          <a href="http_api.html" title="Автоматизация поиска гербарных записей в базе данных"
             accesskey="P">назад</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Документация Электронный гербарий </a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>Администрирование электронного гербария БСИ ДВО РАН<a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h1>
<div class="contents local topic" id="id2">
<ul class="simple">
<li><a class="reference internal" href="#id3" id="id71">Введение</a><ul>
<li><a class="reference internal" href="#index-0" id="id72">Аутентификация и безопасность</a></li>
</ul>
</li>
<li><a class="reference internal" href="#index-1" id="id73">Структура электронного гербария</a><ul>
<li><a class="reference internal" href="#index-2" id="id74">Гербарные акронимы</a></li>
<li><a class="reference internal" href="#index-3" id="id75">Подразделы гербария</a></li>
<li><a class="reference internal" href="#index-4" id="id76">Группы пользователей и права</a></li>
<li><a class="reference internal" href="#id9" id="id77">Суперпользователь</a><ul>
<li><a class="reference internal" href="#index-5" id="id78">Куратор</a></li>
<li><a class="reference internal" href="#index-6" id="id79">Куратор подраздела гербария</a></li>
<li><a class="reference internal" href="#index-7" id="id80">Регулярный пользователь (наборщик)</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#index-8" id="id81">Поля формы и их назначение</a><ul>
<li><a class="reference internal" href="#index-9" id="id82">Поддержка альтернативного языка</a></li>
<li><a class="reference internal" href="#index-10" id="id83">Вид</a></li>
<li><a class="reference internal" href="#index-11" id="id84">Примечание к виду</a></li>
<li><a class="reference internal" href="#index-12" id="id85">Типовой статус</a></li>
<li><a class="reference internal" href="#index-13" id="id86">Сходство</a></li>
<li><a class="reference internal" href="#index-14" id="id87">Код образца</a></li>
<li><a class="reference internal" href="#index-15" id="id88">Полевой код</a></li>
<li><a class="reference internal" href="#index-16" id="id89">Акроним</a></li>
<li><a class="reference internal" href="#index-17" id="id90">Дубликаты</a></li>
<li><a class="reference internal" href="#index-18" id="id91">Страна</a></li>
<li><a class="reference internal" href="#index-19" id="id92">Регион</a></li>
<li><a class="reference internal" href="#index-20" id="id93">Район</a></li>
<li><a class="reference internal" href="#index-21" id="id94">Место сбора</a></li>
<li><a class="reference internal" href="#index-22" id="id95">Координаты</a></li>
<li><a class="reference internal" href="#index-23" id="id96">Высота</a></li>
<li><a class="reference internal" href="#gps-based" id="id97">GPS-Based</a></li>
<li><a class="reference internal" href="#index-25" id="id98">Собрали</a></li>
<li><a class="reference internal" href="#index-26" id="id99">Начало и Конец сбора</a></li>
<li><a class="reference internal" href="#index-27" id="id100">Определили</a></li>
<li><a class="reference internal" href="#index-28" id="id101">Начало и конец определения</a></li>
<li><a class="reference internal" href="#index-29" id="id102">Биоморфологический статус</a></li>
<li><a class="reference internal" href="#index-30" id="id103">Подраздел гербария</a></li>
<li><a class="reference internal" href="#index-31" id="id104">Заметки</a></li>
<li><a class="reference internal" href="#index-32" id="id105">Опубликовано</a></li>
<li><a class="reference internal" href="#index-33" id="id106">Переопределения</a></li>
<li><a class="reference internal" href="#index-34" id="id107">Дополнительные виды</a></li>
<li><a class="reference internal" href="#c" id="id108">Cохранить для добавления следующей записи</a></li>
</ul>
</li>
<li><a class="reference internal" href="#index-36" id="id109">Персональная страница образца</a></li>
<li><a class="reference internal" href="#index-37" id="id110">Этикетка</a></li>
<li><a class="reference internal" href="#index-38" id="id111">Этикетка-Конверт</a></li>
<li><a class="reference internal" href="#index-39" id="id112">Штрихкодирование образцов</a></li>
<li><a class="reference internal" href="#index-40" id="id113">Известные виды</a><ul>
<li><a class="reference internal" href="#index-41" id="id114">Поля таблицы Известных видов</a><ul>
<li><a class="reference internal" href="#id45" id="id115">Название</a></li>
<li><a class="reference internal" href="#id46" id="id116">Авторство</a></li>
<li><a class="reference internal" href="#id47" id="id117">Род</a></li>
<li><a class="reference internal" href="#id48" id="id118">Подвидовой ранг</a></li>
<li><a class="reference internal" href="#id49" id="id119">Подвидовой эпитет</a></li>
<li><a class="reference internal" href="#id50" id="id120">Статус</a></li>
<li><a class="reference internal" href="#index-42" id="id121">Синоним вида</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id52" id="id122">Сообщения об ошибках</a><ul>
<li><a class="reference internal" href="#email" id="id123">Email</a></li>
<li><a class="reference internal" href="#id53" id="id124">Описание</a></li>
<li><a class="reference internal" href="#id54" id="id125">Статус</a><ul>
<li><a class="reference internal" href="#id55" id="id126">Порядок обработки сообщений об ошибках</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id56" id="id127">Оповещение кураторов и отслеживание изменений</a><ul>
<li><a class="reference internal" href="#id57" id="id128">Принцип работы подсистемы</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id58" id="id129">Множественное редактирование базы данных</a><ul>
<li><a class="reference internal" href="#id59" id="id130">Принцип работы</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id61" id="id131">Изображения</a></li>
<li><a class="reference internal" href="#id62" id="id132">Замечания по работе подсистемы автозаполнения</a></li>
</ul>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id71">Введение</a><a class="headerlink" href="#id3" title="Ссылка на этот заголовок">¶</a></h2>
<p>В документе изложены основные принципы работы с формой администрирования, ее основные функции,
права пользователей, описание полей, а также рекомендации и соглашения об их заполнении.</p>
<div class="section" id="index-0">
<span id="id4"></span><h3><a class="toc-backref" href="#id72">Аутентификация и безопасность</a><a class="headerlink" href="#index-0" title="Ссылка на этот заголовок">¶</a></h3>
<p>Аутентификация осуществляется по предоставленному имени пользователя и паролю.</p>
<p>Пароль рекомендуется сменить после первого успешного входа в панель администрирования.
Это можно сделать, перейдя по ссылке в правом верхнем углу окна панели администрирования.</p>
<p>Пароли не хранятся в открытом виде в системе, у администратора системы (или сотрудника с
правами суперпользователя) не существует (кроме прямого подбора) способа, чтобы узнать пароль;
однако, суперпользователь может изменить пароль любого другого пользователя.</p>
<p>После ста неудачных попыток авторизации IP адресс, с которого были сделаны неудачные попытки,
блокируется на час.</p>
<p>Если пользователь в течение 16 часов работы в системе не производит никаких действий – сохранений,
переходов на другие страницы, то срок валидности его сессии истекает.
По истечении срока валидности сессии пользователю необходимо пройти аутентификацию заново
(ввести имя пользователя и пароль), чтобы иметь возможность редактировать образцы.</p>
</div>
</div>
<div class="section" id="index-1">
<span id="id5"></span><h2><a class="toc-backref" href="#id73">Структура электронного гербария</a><a class="headerlink" href="#index-1" title="Ссылка на этот заголовок">¶</a></h2>
<p>Электронный гербарий представляет собой многопользовательское web-приложение, которое позволяет
организовать хранение\изменение\добавление данных с учетом разграничения пользовательских прав,
с учетом названий гербария и гербарных подгрупп.</p>
<p>Разграничение гербарных записей в общей таблице осуществляется по двум основным полям –
принадлежности определенному гербарию (гербарному акрониму) и подразделу гербария.</p>
<p>Например, может потребоваться необходимость внутри данного гербария (например, VBGI),
выделить биоморфологический гербарий, или коллекции грибов и пр. Для этих целей могут
использоваться подразделы гербария.</p>
<p>Права пользователей могут распространяться как на образцы, принадлежащие данному акрониму,
и\или быть ограниченными определенными подразделами гербария.</p>
<p>Пользовательская поисковая форма (размещаемая на странице <a class="reference external" href="http://botsad.ru/herbarium">http://botsad.ru/herbarium</a>)
позволяет осуществлять фильтрацию результатов поиска по гербарным акронимам иили подразделам гербария.</p>
<p>Каждая гербарная запись, независимо от принадлежности гербарному акрониму
или подразделу гербария, получает при своем сохранении уникальный,
привязанный только к этой записи, целочисленный номер ID.
Он назначается системой автоматически.</p>
<p>В системе управления гербарием удаление гербарной записи означает присвоение ей внутреннего статуса
«DELETED» («Удален»), что подразумевает исключение его из списка образцов и
отключение возможности редактирования. Данный механизм реализован с целью
минимизации возможности случайного удаления гербарных записей.</p>
<p>Полное удаление гербарного образца из таблицы может выполнить только суперпользователь системы и только по
одному образцу за одну операцию (множественное удаление образцов из их общего списка приводит
к назначению выделенным образцам внутреннего статуса «DELETED» («Удален»).</p>
<div class="section" id="index-2">
<span id="id6"></span><h3><a class="toc-backref" href="#id74">Гербарные акронимы</a><a class="headerlink" href="#index-2" title="Ссылка на этот заголовок">¶</a></h3>
<p>Гербарные акронимы — идентификаторы принадлежности тому или иному гербарию
(например, гербарию БСИ ДВО РАН, или гербарию Амурского филиала БСИ ДВО РАН)
хранятся в отдельной таблице акронимов,
редактирование которой разрешено только суперпользователю
(см. о правах суперпользователя в разделе <a class="reference internal" href="#id8">Группы пользователей и права</a>).</p>
<p>Пользователи, авторизуемые в системе администрирования, привязаны к тому или иному акрониму.
Когда они сохраняют заполненный гербарный образец,
доступное только для чтения (изначально пустое) поле акронима,
заполняется автоматически в соответствии с этой привязкой.</p>
<p>Каждая запись таблицы акронимов (в настоящий момент таблица хранит записи — VBGI, AmBGI, SAKH)
хранит информацию о физическом размещении гербария (его адрес на англ. языке),
привязку к пользователям, собственно сокращенное названиe.</p>
<p>Акронимы используются для разграничения прав кураторов.
Куратор гербария привязывается к тому или иному акрониму, но не имеет
доступа к гербарным записям принадлежащим другому акрониму.</p>
<p>Информация, содержащаяся в таблице акронимов
(адрес гербария, международное обозначение гербария),
используется при автоматизированном создании макетов этикеток.</p>
<p>Если требуется внести изменения в таблицу акронимов, например,
исправить AmBGI на ABGI, или что-то подобное, изменить адрес гербария,
нужно обращаться к сотруднику с правами суперпользователя системы.</p>
</div>
<div class="section" id="index-3">
<span id="id7"></span><h3><a class="toc-backref" href="#id75">Подразделы гербария</a><a class="headerlink" href="#index-3" title="Ссылка на этот заголовок">¶</a></h3>
<p>Подраздел гербария — необязательное автоматически назначаемое поле
при добавлении гербарной записи.
Оно может быть пустым, либо заполняется при сохранении образца с учетом привязки
конкретного пользователя к подразделу гербария.</p>
<p>Если пользователь с правами куратора привязан к определенному подразделу
гербария, то он является куратором только
данного подраздела (см. также <a class="reference internal" href="#id8">Группы пользователей и права</a>).</p>
<p>Таблица гербарных подразделов с их наименованиями и привязкой к
конкретным пользователям редактируется сотрудником с правами суперпользователя.</p>
<p>Если пользователь, редактирующий гербарий, не привязан ни
к какому гербарному подразделу, то при сохранении записи данное поле
остается пустым (исключение составляют кураторы акронима, а также суперпользователи,
которые могут выбрать подраздел гербария явно).</p>
</div>
<div class="section" id="index-4">
<span id="id8"></span><h3><a class="toc-backref" href="#id76">Группы пользователей и права</a><a class="headerlink" href="#index-4" title="Ссылка на этот заголовок">¶</a></h3>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id77">Суперпользователь</a><a class="headerlink" href="#id9" title="Ссылка на этот заголовок">¶</a></h3>
<p>Суперпользователь — имеет права на все,
за исключением удаления\изменения опубликованных гербарных образцов.
Тем не менее, он может изменить статус опубликованного образца на неопубликованный.</p>
<p>Суперпользователь может полностью удалить гербарный образец из таблицы записей только
нажав кнопку «Удалить» в нижней части формы редактирования гербарного образца.</p>
<p>Множественное выделение образцов с последующим выполнением действия «Удалить гербарные образцы»
суперпользователем не приводит к полному удалению образцов из таблицы, а лишь
назначает выбранным образцам статус «DELETED». Такие образцы можно легко
восстановить при необходимости.</p>
<div class="section" id="index-5">
<span id="id10"></span><h4><a class="toc-backref" href="#id78">Куратор</a><a class="headerlink" href="#index-5" title="Ссылка на этот заголовок">¶</a></h4>
<p>Куратор гербария — осуществляет мониторинг всех гербарных записей в рамках акронима,
к которому он привязан.</p>
<p>Кроме того:</p>
<ul class="simple">
<li>куратор может быть привязан только к одному гербарному акрониму;</li>
<li>куратор осуществляет публикацию (и\или снятие с публикации) гербарных образцов;</li>
<li>куратор может редактировать и просматривать любые гербарные образцы в рамках своего акронима;</li>
<li>куратор не может удалять виды, рода или семейства, но может их добавлять и изменять;</li>
<li>куратор может исключить вид из результатов поиска в всплывающих подсказках, присвоив ему статус «Deleted»;</li>
<li>куратор может добавлять\изменять названия уже добавленных видов (при этом изменения скажутся сразу на всех образца,
у которых указан данный вид: например, если вид <em>Betula mandshurica</em> в таблице видов переименовать
на <em>Betula davurica</em>, то все образцы, где был указан до переименования вид <em>Betula mandsurica</em>,
после переименования будут иметь вид <em>Betula davurica</em>);</li>
<li>куратор может удалять любые образцы в рамках своего акронима</li>
</ul>
</div>
<div class="section" id="index-6">
<span id="id11"></span><h4><a class="toc-backref" href="#id79">Куратор подраздела гербария</a><a class="headerlink" href="#index-6" title="Ссылка на этот заголовок">¶</a></h4>
<p>Если имя пользователя с правами куратора привязано к какому-либо гербарному подразделу,
то все права куратора ограничиваются только данным подразделом.
Остальные права куратора гербарной группы идентичны правам куратора гербария.</p>
</div>
<div class="section" id="index-7">
<span id="id12"></span><h4><a class="toc-backref" href="#id80">Регулярный пользователь (наборщик)</a><a class="headerlink" href="#index-7" title="Ссылка на этот заголовок">¶</a></h4>
<p>Осуществляет набор данных от своего имени. Акроним гербарной записи при этом назначается автоматически,
исходя из привязки пользователя определенному гербарному акрониму.</p>
<p>Регулярный пользователь может быть дополнительно привязан к подразделу гербария.
В этом случае, сохранение образца влечет автоматическое назначение подраздела данной гербарной записи.</p>
<ul class="simple">
<li>регулярный пользователь может создавать,  просматривать и редактировать уже созданные гербарные записи;</li>
<li>может создавать новые виды;</li>
<li>не может создавать рода и семейства;</li>
<li>не может изменять статус видов;</li>
<li>не может публиковать\снимать с публикации гербарные записи;</li>
<li>не может удалять созданные гербарные записи;</li>
</ul>
<p>Существует еще дополнительный набор прав — «Редактор мультивидовых сборов»,
который подразумевает, что форма редактирования образца включает поля,
отражающие присутствие дополнительных видов в данном гербарном сборе; в обычном
гербарии сосудистых растений такая функция не нужна,
поэтому она включается только при присвоении пользователю данного набора прав.</p>
</div>
</div>
</div>
<div class="section" id="index-8">
<span id="id13"></span><h2><a class="toc-backref" href="#id81">Поля формы и их назначение</a><a class="headerlink" href="#index-8" title="Ссылка на этот заголовок">¶</a></h2>
<p>Любые поля формы, выделенные жирным шрифтом, обязательны для заполнения.</p>
<p>В форме редактирования гербарных образцов такое поле одно — это поле <strong>Вид</strong>.</p>
<div class="section" id="index-9">
<span id="id14"></span><h3><a class="toc-backref" href="#id82">Поддержка альтернативного языка</a><a class="headerlink" href="#index-9" title="Ссылка на этот заголовок">¶</a></h3>
<p>Заполняя данные в цифровой гербарий, прежде всего следует ориентироваться на международное научное сообщество.
Таким образом, предпочтительным языком заполнения является английский.</p>
<p>Тем не менее, некоторые поля, а именно <a class="reference internal" href="#id23">Страна</a>, <a class="reference internal" href="#id24">Регион</a>, <a class="reference internal" href="#id25">Район</a>, <a class="reference internal" href="#id26">Место сбора</a>, <a class="reference internal" href="#id28">Высота</a>, <a class="reference internal" href="#id35">Заметки</a>,
<a class="reference internal" href="#id16">Примечание к виду</a> поддерживают эмуляцию двуязычного заполнения при помощи спецсимвола «|».</p>
<p>Эмуляция двуязычности работает следующим образом. Разграничение языков осуществляется при помощи специального символа «|».
Например, поле <a class="reference internal" href="#id24">Регион</a> может содержать: «Дальний Восток России|Russian Far East»
(<em>кавычки в форме администрования не ставятся</em>).
В этом случае, система автоматически будет использовать русский вариант (Дальний Восток России),
если пользовательский язык просмотра страницы «русский», и английский вариант (Russian Far East)
— в случае, если язык просмотра «английский».</p>
<p>Кроме того, при выборе языка в строках с символом «|» учитываются следующие правила:</p>
<ul class="simple">
<li>если в строке символ «|» встречается более одного раза, система отображает
строку как есть (никакого выбора языка не происходит);</li>
<li>если в строке символ отделяет пустую подстроку (например, «Владивосток|   «),
то строка отображается как есть (никакого выбора языка не происходит);</li>
<li>порядок русско- и англоязычного вариантов в строке относительно символа «|» не
имеет значения: т.е. «Дальний Восток России|Russian Far East» и
«Russian Far East|Дальний Восток России» являются эквивалентными записями с точки зрения системы;</li>
<li>система считает русскоязычной ту подстроку относительно символа «|»,
в которой больше встретилось кириллических символов;</li>
<li>если число кириллических символов в обоих частях строки относительно «|»
одинаково, или они вообще отсутствуют, англоязычной считается правая
подстрока относительно символа «|».</li>
</ul>
<p>Выбор языка для полей – <strong>Дат сбора\определения</strong>  осуществляется автоматически системой,
исходя из текущего языка браузера пользователя.</p>
<p>Поля <strong>Определили</strong> и <strong>Собрали</strong> будут использовать автоматическую
транслитерацию на английский язык, если они заданы на русском, а язык
просмотра пользователем страницы отличен от русского. Данные поля не нужно переводить,
если они заполнены на русском, но можно сразу заполнять на английском.</p>
</div>
<div class="section" id="index-10">
<span id="id15"></span><h3><a class="toc-backref" href="#id83">Вид</a><a class="headerlink" href="#index-10" title="Ссылка на этот заголовок">¶</a></h3>
<p>Заполнить поле вид можно только элементом из всплывающей подсказки. Подсказка формируется по уже добавленным
видам в базу, а также более 500k (по состоянию на конец 2016 г) видам из базы данных theplantlist.org.</p>
<p>Поиск выполняется как только набрано 3 и более символов в поле <strong>Вид</strong>; при этом полагается,
что первые символы — должны состоять в названии рода, а последующие,
если они идут через пробел – видового эпитета.
Иными словами, если мы вводим в поисковое поле <strong>Вид</strong>: <em>Tra</em>, то в
поиске появятся все виды с родами, начинающиеся на <em>Tra</em>,
при этом количество видимых вариантов будет
ограничено 50 вариантами; если в
поисковом поле <strong>Вид</strong> будет, например, <em>Tra ps</em>, то
найдутся все виды,  рода у которых начинаются  на <em>Tra</em>, и,
кроме того, видовой эпитет содержит <em>ps</em>, т.е., например, <em>Trapa pseudoincisa</em> и т.п.</p>
<p>Если требуемый вид отсутствует, нужно нажать рядом кнопку в виде «зеленого плюса»
и добавить недостающий вид. Если отсутствует
необходимый род и\или семейство, необходимо обратиться к
сотруднику с правами куратора и\или суперпользователя,
чтобы добавить недостающий род и\или семейство.</p>
<p>У вида можно задать синоним. Добавление синонимов доступно на странице редактирования вида.
Подробно об этом можно прочитать в разделе <a class="reference internal" href="#id43">Известные виды</a>.</p>
<p>Во всплывающем списке с известными видами (<a class="reference internal" href="#main-pic1"><span class="std std-ref">Рис. 1</span></a>)
в круглых скобках приводится общее количество записей в базе данных, содержащих
данный вид. Учитываются всё – опубликованные и не опубликованные записи,
записи в разделе дополнительные виды, и виды, участвующие в истории определений.</p>
<div class="figure align-center" id="id64">
<span id="main-pic1"></span><img alt="Всплывающий список известных видов" src="_images/Screenshot_20180208_090825.png" />
<p class="caption"><span class="caption-text">Рис. 1. Всплывающий список известных видов</span></p>
</div>
<p>После того, как вид выбран, он отображается внизу поискового поля с указанием
числа уже внесенных в базу записей, где данный вид встречался (<a class="reference internal" href="#main-pic2"><span class="std std-ref">Рис. 2</span></a>).</p>
<div class="figure align-center" id="id65">
<span id="main-pic2"></span><img alt="Поле &quot;Вид&quot; после выбора вида" src="_images/Screenshot_20180208_165811.png" />
<p class="caption"><span class="caption-text">Рис. 2. Поле «Вид» после выбора вида</span></p>
</div>
</div>
<div class="section" id="index-11">
<span id="id16"></span><h3><a class="toc-backref" href="#id84">Примечание к виду</a><a class="headerlink" href="#index-11" title="Ссылка на этот заголовок">¶</a></h3>
<p>Строка; максимальная длина — 300 символов. Поддерживает режим двуязычности с использованием символа «|».
Видна только пользователям с правами «редактора мультивидовых сборов».
Характеризует специфические особенности основного вида данного гербарного сбора в случае мультивидовых сборов.</p>
</div>
<div class="section" id="index-12">
<span id="id17"></span><h3><a class="toc-backref" href="#id85">Типовой статус</a><a class="headerlink" href="#index-12" title="Ссылка на этот заголовок">¶</a></h3>
<p>Поле, доступное для редактирования только пользователям с правами куратора.</p>
<p>Возможные значения: пустое значение, HOLOTYPUS, ISOTYPUS, PARATYPUS, LECTOTYPUS.</p>
<p>Значение типового статуса отражается на генерируемых этикетках
(данная функциональность еще не реализована).</p>
</div>
<div class="section" id="index-13">
<span id="id18"></span><h3><a class="toc-backref" href="#id86">Сходство</a><a class="headerlink" href="#index-13" title="Ссылка на этот заголовок">¶</a></h3>
<p>Характеризует степень уверенности в определении вида данного образца.
Возможные значения «affinis» (aff.), «confertum» (cf.).</p>
<p>Данное поле присутствует также во вкладках <a class="reference internal" href="#id37">Переопределения</a> и <a class="reference internal" href="#id38">Дополнительные виды</a>.</p>
</div>
<div class="section" id="index-14">
<span id="id19"></span><h3><a class="toc-backref" href="#id87">Код образца</a><a class="headerlink" href="#index-14" title="Ссылка на этот заголовок">¶</a></h3>
<p>Уникальный в рамках данного акронима числовой код. Этот код опциональный и может не заполняться.
Однако, в некоторых публикациях могут быть ссылки на гербарные образцы с
указанием этого кода, поэтому он может быть важен.</p>
<p>Если данный код задан, то он отражается на этикетке; если не задан — вместо него используется символ «*».</p>
<p>Регулярный пользователь (наборщик) не имеет прав заполнять данное поле,
однако его права могут быть расширены на этот случай.</p>
<p>По умолчанию, права на заполнение данного поля имеют кураторы и суперпользователи.</p>
</div>
<div class="section" id="index-15">
<span id="id20"></span><h3><a class="toc-backref" href="#id88">Полевой код</a><a class="headerlink" href="#index-15" title="Ссылка на этот заголовок">¶</a></h3>
<p>Опциональный код. Его назначает сборщик гербария; его максимальная длина 20 символов,
при этом допустимо использовать любые символы в рамках кодировки utf-8
(т.е. там могут быть и японские иероглифы).</p>
<p>Также может быть важным для ссылок.</p>
<p>Если существует, то отражается на этикетке.</p>
</div>
<div class="section" id="index-16">
<span id="id21"></span><h3><a class="toc-backref" href="#id89">Акроним</a><a class="headerlink" href="#index-16" title="Ссылка на этот заголовок">¶</a></h3>
<p>Автозаполняемое поле. Оно доступно только для чтения для всех пользователей,
за исключением суперпользователя.</p>
<p>Суперпользователь может самостоятельно назначить
принадлежность образца любому акрониму.</p>
<p>Автозаполнение осуществляется на основе привязки пользователей к акронимам.</p>
<p>Одному пользователю соответствует только один акроним.</p>
<p>Поле используется при формировании заголовка этикетки.</p>
</div>
<div class="section" id="index-17">
<span id="id22"></span><h3><a class="toc-backref" href="#id90">Дубликаты</a><a class="headerlink" href="#index-17" title="Ссылка на этот заголовок">¶</a></h3>
<p>В поле указывается перечень гербарных акронимов (в соответствии с <a class="reference external" href="http://sweetgum.nybg.org/science/ih/">Index Herbariorum</a>)
через запятую, в которые были депонированы дубликаты текущего гербарного образца.</p>
<p>Права на заполнения данного поля имеют кураторы гербарного акронима или подраздела гербария.</p>
<p>Информация о дубликатах, если таковая была внесена, отображается на персональной странице
гербарной записи, а также на этикетке-конверте.</p>
<p>(отображение данной информации на обычной этикетке (для сосудистых растений)
в процессе обсуждения)</p>
</div>
<div class="section" id="index-18">
<span id="id23"></span><h3><a class="toc-backref" href="#id91">Страна</a><a class="headerlink" href="#index-18" title="Ссылка на этот заголовок">¶</a></h3>
<p>Рекомендуемое к заполнению поле. Необходимо выбрать страну происхождения гербарного сбора.
Поиск осуществляется по русскоязычным и англоязычным общепринятым в рамках стандарта
<a class="reference external" href="https://ru.wikipedia.org/wiki/ISO_3166-1">ISO</a> перечнем стран (вместо «Российская Федерация» для компактности формы при
создании электронных макетов этикеток  используется «Россия»).</p>
<p>Данное поле отображается на английском языке на этикетке.</p>
</div>
<div class="section" id="index-19">
<span id="id24"></span><h3><a class="toc-backref" href="#id92">Регион</a><a class="headerlink" href="#index-19" title="Ссылка на этот заголовок">¶</a></h3>
<p>Отображается на этикетке. Это поле с возможным автозаполнением из того, что уже было введено в базу.</p>
<p>Поддерживает двуязычное заполнение, описанное в разделе <a class="reference internal" href="#id14">Поддержка альтернативного языка</a>.</p>
</div>
<div class="section" id="index-20">
<span id="id25"></span><h3><a class="toc-backref" href="#id93">Район</a><a class="headerlink" href="#index-20" title="Ссылка на этот заголовок">¶</a></h3>
<p>Поддерживает двуязычное заполнение, описанное в разделе
<a class="reference internal" href="#id14">Поддержка альтернативного языка</a>.</p>
<p>При отображении на этикетке соединяется с содержимым поля <strong>Место сбора</strong>.
При создании этикетки, если содержимое поля <strong>Место сбора</strong>
задано на английском языке, и содержимое поля <strong>Район</strong> заполнено
в двуязычном режиме – выбирается англоязычный вариант
названия района; Если содержимое поля
<strong>Место сбора</strong> задано на русском языке, то название района
печается на русском языке.</p>
</div>
<div class="section" id="index-21">
<span id="id26"></span><h3><a class="toc-backref" href="#id94">Место сбора</a><a class="headerlink" href="#index-21" title="Ссылка на этот заголовок">¶</a></h3>
<p>Максимальная длина этого поля 600 символов.
В этом поле следует также размещать важную информацию об
экологических особенностях места сбора.</p>
<p>Поддерживает двуязычное заполнение, описанное в разделе <a class="reference internal" href="#id14">Поддержка альтернативного языка</a>.</p>
<p>При генерировании этикетки-конверта данное поле поддерживает тэги изменения
стиля написания: <strong>&lt;b&gt;&lt;/b&gt;, &lt;i&gt;&lt;/i&gt;</strong> и их комбинации.  Тэг &lt;b&gt;content&lt;/b&gt; –
приводит к <strong>жирному</strong> стилю написания содержимого <strong>content</strong>, тэг &lt;i&gt;content&lt;/i&gt;, соответственно,
отвечает за <em>курсив</em>. Кроме того, поддерживаются тэги верхнего индекса <strong>&lt;sup&gt;&lt;/sup&gt;</strong> и
нижнего индекса <strong>&lt;sub&gt;&lt;/sub&gt;</strong>, их также можно комбинировать со стилевыми тэгами.</p>
<p>Возможны вложенные конструкции тэгов.</p>
<p>При создании этикетки для сосудистых растений интегрируется с полем <strong>Район</strong>.
Содержимое поле <a class="reference internal" href="#id25">Район</a>  при этом печатается вначале.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p>Это пример описания &lt;b&gt;места&lt;/b&gt; &lt;i&gt;сбора&lt;/i&gt;.</p>
<p>Отобразится на этикете-конверте следующим образом:</p>
<p class="last">Это пример описания <strong>места</strong> <em>сбора</em>.</p>
</div>
</div>
<div class="section" id="index-22">
<span id="id27"></span><h3><a class="toc-backref" href="#id95">Координаты</a><a class="headerlink" href="#index-22" title="Ссылка на этот заголовок">¶</a></h3>
<p>Для заполнения можно использовать флажок на прилагаемой карте Google.
При изменении позиции флажка, автоматически изменяются и координаты.
В правом верхнем углу карты есть и поисковое поле, в которое можно ввести здесь
название населенного пункта и флажок переместится в центр этого пункта, если,
конечно, такой будет найден (т.е. если название известно Google).</p>
</div>
<div class="section" id="index-23">
<span id="id28"></span><h3><a class="toc-backref" href="#id96">Высота</a><a class="headerlink" href="#index-23" title="Ссылка на этот заголовок">¶</a></h3>
<p>Высота над уровнем моря в метрах.</p>
<p>Поддерживает двуязычное заполнение, описанное в разделе <a class="reference internal" href="#id14">Поддержка альтернативного языка</a>.</p>
</div>
<div class="section" id="gps-based">
<span id="index-24"></span><h3><a class="toc-backref" href="#id97">GPS-Based</a><a class="headerlink" href="#gps-based" title="Ссылка на этот заголовок">¶</a></h3>
<p>Отмечается, если координаты сбора были получены при помощи GPS;
это характеристика точности позиционирования сбора; поскольку координаты
сбора могут быть получены исходя из описания сбора ручным указанием
положения флажка на Google-карте.</p>
</div>
<div class="section" id="index-25">
<span id="id29"></span><h3><a class="toc-backref" href="#id98">Собрали</a><a class="headerlink" href="#index-25" title="Ссылка на этот заголовок">¶</a></h3>
<p>Поле-автоподсказка. Автоподсказка формируется из уже известных
уникальных записей, внесенных в базу.</p>
</div>
<div class="section" id="index-26">
<span id="id30"></span><h3><a class="toc-backref" href="#id99">Начало и Конец сбора</a><a class="headerlink" href="#index-26" title="Ссылка на этот заголовок">¶</a></h3>
<p>Для заполнения может быть использован всплывающий календарик (кнопка справа).
Начало и конец указываются если не известна точная дата сбора, но известны,
например, даты проведения экспедиции, в ходе которой был осуществлен сбор.</p>
<p>Если дата известна точно, то можно заполнить только одно поле — начало сбора;
также можно указать конец сбора, таким же как и начало сбора, либо оставить пустым.</p>
<p>Дата сбора отражается на этикетке, в виде, например, таком: 15 Jul 1998.</p>
<p>Если известен только месяц сбора, то этот факт следует отражать указав начало
сбора — первое число месяца, а конец сбора – последнее число месяца.
Например, если сбор выполнен в марте, 1999 года, то начало сбора будет
1 марта 1999 г, а конец сбора – 31 марта 1999 г.</p>
<p>Если время сбора указано с точностью до года, следует поступать аналогичным
образом – указать первое и последнее числа года – 1 января и 31 декабря.</p>
</div>
<div class="section" id="index-27">
<span id="id31"></span><h3><a class="toc-backref" href="#id100">Определили</a><a class="headerlink" href="#index-27" title="Ссылка на этот заголовок">¶</a></h3>
<p>Поле-автоподсказка. Работает  по аналогии с полем «Собрали».
Отражается на этикетке. Если ученых, участвующих в определении много, на
этикетке будет указан сокращенный вариант – первые одна,
две фамилии (сколько удастся автоматически разместить).</p>
</div>
<div class="section" id="index-28">
<span id="id32"></span><h3><a class="toc-backref" href="#id101">Начало и конец определения</a><a class="headerlink" href="#index-28" title="Ссылка на этот заголовок">¶</a></h3>
<p>Аналогично началу и концу сбора. Поле не отражается на этикетке.</p>
</div>
<div class="section" id="index-29">
<span id="id33"></span><h3><a class="toc-backref" href="#id102">Биоморфологический статус</a><a class="headerlink" href="#index-29" title="Ссылка на этот заголовок">¶</a></h3>
<p>Отражается на этикетке, если непусто. Возможные значения
«Dev.stage partly» или «life form». Эти словосочетания
и печатаются на этикетке. Специально для биоморфологического
гербария БСИ ДВО РАН.</p>
<p>Вполне возможно, оно будет строго привязано к гербарному
подразделу «Биоморфологический гербарий», и не будет появляться
у пользователей, не привязанных к этой группе.</p>
</div>
<div class="section" id="index-30">
<span id="id34"></span><h3><a class="toc-backref" href="#id103">Подраздел гербария</a><a class="headerlink" href="#index-30" title="Ссылка на этот заголовок">¶</a></h3>
<p>Автоматически назначаемое поле и доступное только для чтения для регулярных пользователей.</p>
<p>Куратор акронима – пользователь, имеющий права куратора, но не привязанный ни к одному
из подразделов, может устанавливать значение данного поля из всплывающего списка.</p>
<p>Суперпользователь может редактировать данное поле и указывать подраздел гербария явно.</p>
<p>В других случаях поле назначается исходя из привязки пользователя подразделу.</p>
<p>Назначается при сохранении образца.</p>
</div>
<div class="section" id="index-31">
<span id="id35"></span><h3><a class="toc-backref" href="#id104">Заметки</a><a class="headerlink" href="#index-31" title="Ссылка на этот заголовок">¶</a></h3>
<p>Все что еще мы хотим сообщить о сборе. Для этого поле допускает 1000 символов.</p>
<p>Поддерживает двуязычное заполнение, описанное в разделе
<a class="reference internal" href="#id14">Поддержка альтернативного языка</a>.</p>
<p>При генерировании этикетки-конверта данное поле поддерживает тэги изменения
стиля написания: <strong>&lt;b&gt;&lt;/b&gt;, &lt;i&gt;&lt;/i&gt;</strong> и их комбинации. Тэг &lt;b&gt;content&lt;/b&gt; –
приводит к <strong>жирному</strong> стилю написания содержимого <strong>content</strong>,
тэг &lt;i&gt;content&lt;/i&gt;, соответственно, отвечает за <em>курсив</em>.
Возможны вложенные конструкции тэгов.
Кроме того, поддерживаются тэги верхнего индекса <strong>&lt;sup&gt;&lt;/sup&gt;</strong> и
нижнего индекса <strong>&lt;sub&gt;&lt;/sub&gt;</strong>, их также можно комбинировать
со стилевыми тэгами.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p>Это пример описания &lt;b&gt;места&lt;/b&gt; &lt;i&gt;сбора&lt;/i&gt;.</p>
<p>Отобразится на этикете-конверте следующим образом:</p>
<p class="last">Это пример описания <strong>места</strong> <em>сбора</em>.</p>
</div>
</div>
<div class="section" id="index-32">
<span id="id36"></span><h3><a class="toc-backref" href="#id105">Опубликовано</a><a class="headerlink" href="#index-32" title="Ссылка на этот заголовок">¶</a></h3>
<p>Если отмечено, то образец опубликован.
Публиковать образцы (как и снимать их с публикации) могут
только кураторы герабрия\гербарной группы,
а также суперпользователь.</p>
</div>
<div class="section" id="index-33">
<span id="id37"></span><h3><a class="toc-backref" href="#id106">Переопределения</a><a class="headerlink" href="#index-33" title="Ссылка на этот заголовок">¶</a></h3>
<p>Переопределения заполняются, если первоначально определенный вид,
потом переопределили. На этикетке, однако, при этом сохраняется
первоначальные данные. История переопределений не отражается
на этикетке.</p>
<p>В разделе «Переопределения» можно добавить несколько определений,
указав соответственно начало (и при необходимости конец) валидности
определения. Последним полем блока «Переопределения» является вид,
то на что текущий вид был переопределен.</p>
<p>Если этот раздел заполнен, то он отображается на персональной странице образца.</p>
<p>Если поле «Определили» пусто, а история переопределений имеется,
то на этикетке будет отображена последняя запись из истории переопределений.</p>
</div>
<div class="section" id="index-34">
<span id="id38"></span><h3><a class="toc-backref" href="#id107">Дополнительные виды</a><a class="headerlink" href="#index-34" title="Ссылка на этот заголовок">¶</a></h3>
<p>Раздел доступен для редактирования только пользователям с правами
«Редактор мультивидовых сборов» (пользователей со специальными правами,
у которых в сборах может быть больше одного вида).</p>
<p>Дополнительные виды заполняются по аналогии с полем <a class="reference internal" href="#id37">Переопределения</a>,
за исключением того, что  для каждого дополнительного вида имеется
возможность указать индивидуальное примечание.
Данные примечания ограничены объемом 300 символов,
также как и поле <a class="reference internal" href="#id16">Примечание к виду</a>.</p>
</div>
<div class="section" id="c">
<span id="index-35"></span><h3><a class="toc-backref" href="#id108">Cохранить для добавления следующей записи</a><a class="headerlink" href="#c" title="Ссылка на этот заголовок">¶</a></h3>
<p>Если отметить данную позицию, то следующий добавляемый
гербарный объект будет иметь
уже заполненные поля, как у текущего. Данная функция удобна,
когда необходимо добавить
несколько гербарных объектов, имеющих однотипное описание:
собранных в одинаковом месте, в одинаковых условиях и т.п.</p>
<p>Прежде чем отмечать позицию «Сохранить для добавления следующей записи»,
важно предварительно сохранить
заполненную форму. Поэтому, рекомендуется всегда сначала нажимать
«Сохранить и продолжить редактирование», а уже потом
отмечать «Сохранить для добавления следующей записи».</p>
<p>Отмечая позицию «Сохранить для добавления следующей записи» пользователь
сообщает системе, чтобы она запомнила ID текущего образца и использовала
данные его полей для добавления следующих записей.</p>
<p>При добавлении последующих образцов надпись позиции «Сохранить для
добавления следующей записи» дополниться
фразой «(не этот образец)», которая указывает, что информация для
предварительного заполнения полей берется из какой-то другой записи
(на которой позиция была отмечена).</p>
<p>Снятие галочки с данной позиции выключает данную функциональность.</p>
<p>Функциональность работает в рамках данной сессии пользователя. Если
пользователь завершит работу с системой и потом снова авторизуется,
функциональность запоминания полей будет отключена.</p>
<p>Следует иметь ввиду, что в текущей реализации данная функциональность не
запоминает поля форм <a class="reference internal" href="#id37">Переопределения</a> и <a class="reference internal" href="#id38">Дополнительные виды</a>
(<em>вполне возможно, что в будущем это будет изменено</em>).</p>
</div>
</div>
<div class="section" id="index-36">
<span id="id39"></span><h2><a class="toc-backref" href="#id109">Персональная страница образца</a><a class="headerlink" href="#index-36" title="Ссылка на этот заголовок">¶</a></h2>
<p>Детальная информация об опубликованном образце доступна по адресу: <a class="reference external" href="http://botsad.ru/hitem/ID">http://botsad.ru/hitem/ID</a>,
где «ID» это уникальный код образца, назначаемый системой.</p>
<p>Также, в целях соответствия общим стандартам, валидными ссылками на персональную страницу
образца являются ссылки вида: <a class="reference external" href="http://botsad.ru/hitem/ACRONYMXXXXX">http://botsad.ru/hitem/ACRONYMXXXXX</a>, где ACRONYM –
акроним гербария, XXXXX – уникальный числовой код образца.</p>
<p>Примеры: <a class="reference external" href="http://botsad.ru/hitem/VBGI133">http://botsad.ru/hitem/VBGI133</a>, <a class="reference external" href="http://botsad.ru/hitem/VBGI120">http://botsad.ru/hitem/VBGI120</a></p>
<p>Аналогичный формат доступа к персональным страницам используется в электронном
гербарии KEW: <a class="reference external" href="http://apps.kew.org/herbcat/gotoCiteUs.do">http://apps.kew.org/herbcat/gotoCiteUs.do</a></p>
<p>На этой странице указывается история определений,
заметки и прочая информация, не вошедшая на этикетку.</p>
<p>Адрес персональной страницы не зависит от
акронима и\или гербарной группы.</p>
<p>В адресной строке персональной страницы образца важен только
уникальный числовой код образца: страницы <a class="reference external" href="http://botsad.ru/hitem/123">http://botsad.ru/hitem/123</a>,
<a class="reference external" href="http://botsad.ru/hitem/VBGI123">http://botsad.ru/hitem/VBGI123</a>, <a class="reference external" href="http://botsad.ru/hitem/ANYWORD123">http://botsad.ru/hitem/ANYWORD123</a>,
будут указывать на персональную страницу одного и того же образца
(т.е. валидация принадлежности образца с данным кодом не производится).</p>
</div>
<div class="section" id="index-37">
<span id="id40"></span><h2><a class="toc-backref" href="#id110">Этикетка</a><a class="headerlink" href="#index-37" title="Ссылка на этот заголовок">¶</a></h2>
<p>Для генерации этикеток в общем списке гербарных записей панели
администрирования необходимо
выделить образцы, выбрать действие – «Создать этикетки» и нажать «Выполнить».</p>
<p>За один запрос можно сгенерировать не более 100 этикеток;
они автоматически размещаются оптимально на странице формата A4.</p>
<p>QR-код, размещаемый на этикетке, представляет собой URL персональной
страницы образца, также указываемый мелким шрифтом сразу под изображением QR-кода.</p>
<p>Если среди опубликованных образцов для генерации этикетки будут
выбраны и неопубликованные – последние будут проигнорированы,
а этикетки будут созданы только для опубликованных записей.</p>
<p>URL для генерации этикеток можно ввести вручную, указывая через
запятую <strong>ID</strong> тех гербарных записей, для которых необходимо
сгенерировать этикетки.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Пример:
<a class="reference external" href="https://botsad.ru/hitem/pdf/33682,33682,33682,33680">https://botsad.ru/hitem/pdf/33682,33682,33682,33680</a></p>
</div>
<p>Такой подход може быть полезен в случае, если необходимо сгенерировать
несколько одинаковых этикеток, соответствующих определенной гербарной записи.</p>
<p>Генерирования этикеток путем ввода URL
возможно только после авторизации пользователя в системе.</p>
<p><a class="reference download internal" href="_downloads/sample-labels.pdf" download=""><code class="xref download docutils literal"><span class="pre">Пример</span> <span class="pre">этикетки</span></code></a></p>
</div>
<div class="section" id="index-38">
<span id="id41"></span><h2><a class="toc-backref" href="#id111">Этикетка-Конверт</a><a class="headerlink" href="#index-38" title="Ссылка на этот заголовок">¶</a></h2>
<p>Некоторые гербарные сборы предпочтительно хранить в конвертах.
С этой целью система предлагает специальный формат
этикетки «Этикетка-Конверт».</p>
<p>Этикетка-Конверт представляет собой лист формата A4,
в нижней трети которого, представляющей
лицевую сторону конверта, располагается подробная
информация о сборе, а также штрих-код, оформленный в
соответствие с правилами, описанными в разделе
<a class="reference internal" href="#id42">Штрихкодирование образцов</a> ; в центре страницы,
соответствующей оборотной стороне конверта, размещается
QR-код, кодирующий ссылку на персональную страницу образца;</p>
<p>Для генерации этикеток в общем списке гербарных записей
панели администрирования необходимо
выделить образцы, выбрать действие – «Создать этикетки-конверты»
и нажать «Выполнить».</p>
<p>За один запрос можно сгенерировать не более 100 этикеток-конвертов.</p>
<p>Первый вид, указываемый на этикетке-конверте – основной вид сбора,
далее, каждый на новой строке, идут дополнительные (сопутствующие) виды.</p>
<p>После располагается блок информации о сборе;
в этом блоке отображаются:</p>
<ul class="simple">
<li>Страна</li>
<li>Регион</li>
<li>Район</li>
<li>Координаты сбора</li>
<li>Статус координат (если координаты получены при помощи gps,
то это отмечается строкой „[GPS-based]“</li>
<li>Кто собрал и дата сбора</li>
<li>Заметки</li>
<li>Место сбора</li>
</ul>
<p>Далее, идут примечания к видам, а также к основному сбору;
Переопределения основного вида интегрируются
с примечаниями к нему.</p>
<p>Этикетка-конверт поддерживает автоматический выбор корейского/японского шрифта, если
слово набрано корейскими или японскими символами (в кодировке utf-8). Такую смену шрифта
поддерживают поля: <a class="reference internal" href="#id24">Регион</a>, <a class="reference internal" href="#id25">Район</a>, <a class="reference internal" href="#id35">Заметки</a>, <a class="reference internal" href="#id26">Место сбора</a>, а также примечания к
дополнительным видам.</p>
<p><a class="reference download internal" href="_downloads/sample-envelope.pdf" download=""><code class="xref download docutils literal"><span class="pre">Пример</span> <span class="pre">этикетки-конверта</span></code></a></p>
</div>
<div class="section" id="index-39">
<span id="id42"></span><h2><a class="toc-backref" href="#id112">Штрихкодирование образцов</a><a class="headerlink" href="#index-39" title="Ссылка на этот заголовок">¶</a></h2>
<p>Назначение инвентаризационных номеров важный этап систематизации
гербарных накоплений.
Штрихкод размещается на гербарном листе перед его сканированием и представляет собой уникальный идентификатор
данной гербарной записи, формат которого в текущий момент принимается мировым научным сообществом.</p>
<p>Для генерации страницы штрихкодов  в общем списке гербарных записей панели
администрирования необходимо выделить образцы,
выбрать действие – «Создать штрихкоды» и нажать «Выполнить».</p>
<p>За один запрос можно сгенерировать не более 100 штрихкодов; они размещаются
автоматически оптимальным образом на странице формата A4.
Если штрихкоды не помещаются на одной странице,
генерируется многостраничный pdf-документ.</p>
<p>Штрихкоды можно генерировать для всех (не обязательно опубликованных) образцов, внесенных в базу.</p>
<p>В качестве алгоритма для создания штрихкодов используется <a class="reference external" href="https://ru.wikipedia.org/wiki/Code_39">CODE39</a>,
а кодируемая строка имеет вид ACRONYMXXXX,  где XXXX – уникальный
числовой код (ID) образца внутри данного акронима. Под штрихкодом дублируется
кодируемая им строка (размер шрифта фиксирован). Над штрихкодом приводится название
организации (размер шрифта динамический, выбирается так, чтобы название
организации не выходило за границы штрихкода).
Оформление штрихкода сделано по образцу электронного гербария <a class="reference external" href="http://apps.kew.org/herbcat/navigator.do">KEW</a>.</p>
<p><a class="reference download internal" href="_downloads/sample-barcodes.pdf" download=""><code class="xref download docutils literal"><span class="pre">Пример</span>&#160; <span class="pre">документа</span> <span class="pre">со</span> <span class="pre">штрихкодами</span></code></a></p>
</div>
<div class="section" id="index-40">
<span id="id43"></span><h2><a class="toc-backref" href="#id113">Известные виды</a><a class="headerlink" href="#index-40" title="Ссылка на этот заголовок">¶</a></h2>
<p>Все известные виды представлены в трех таблицах – таблице семейств,
таблице родов и, собственно, названий видов.
Названия видов с авторами привязаны к таблице родов, записи таблицы
родов – привязаны к таблице семейств.</p>
<p>Таблица названий видов используется для формирования подсказок
при заполнении поля <strong>Вид</strong> формы гербарного образца.</p>
<p>Каждая запись таблицы видов имеет дополнительный статус –
«From plantlist» (из базы theplantlist.org),
«Approved» (проверенный), «Deleted» (удаленный) и  «Recently added»
(новый, недавно добавленный).</p>
<p>Названия видов, имеющие статус «From plantlist» или «Approved»
считаются доверенными, и образцы, в которых участвуют такие виды,
могут быть беспрепятственно опубликованы куратором гербария.</p>
<p>В случае, если название вида имеет статус «Recently added», и оно
участвует в гербарной записи, такую гербарную запись опубликовать не получится.</p>
<p>Чтобы опубликовать такую запись необходимо, чтобы куратор
(или суперпользователь) изменил статус вида (проверил вид) на «Approved».</p>
<p>Ни куратор, ни регулярный пользователь не может полностью удалить вид
из таблицы известных видов. Вместо этого, куратор может изменить
статус вида на «Удаленный» («Deleted»).
Виды, имеющие статус «Deleted», не участвуют во всплывающих списках-подсказках
при заполнении полей формы гербарного образца. В таблице видов отображаются все виды,
в том числе и имеющие статус «Deleted».
Таким образом, статус «Deleted» должен использоваться чтобы ограничить результаты
поиска во всплывающих подсказках, что может быть полезным чтобы исключить
устаревшие и\или неправильные названия видов.</p>
<p>Регулярный пользователь (наборщик гербария) не может изменять статус вида.</p>
<p>На странице редактирования вида можно задать его синоним. К данному виду
можно присоединить только один вид-синоним.
Если вид имеет несколько синонимов, можно поступить следующим образом.
Допустим вид A имеет синонимы B, C, D.
Тогда, редактируя страницы видов B, C, D можно в них указать, что
они являются синонимами вида A. При выполнении поиска с учетом синонимов,
информация об образуемых этим способом классах эквивалентности (синомичности)
видов будет использована при формировании запроса к базе гербарных образцов.</p>
<p>В качестве дополнительной защиты от случайного редактирования
уже проверенные (имеющие статус «Approved»)
виды по истечении определенного количества дней «замораживаются».
Количество дней с момента последнего
редактирования вида до «заморозки» возможности его
редактирования определяется параметром
<a class="reference external" href="https://github.com/VBGI/herbs/blob/master/herbs/conf.py">APPROVED_SPECIES_FREEZE</a>. Текущее значение этого параметра 30 дней.
Виды, имеющие другие статусы, в том числе статус «From plantlist»,
не замораживаются. «Замороженные» виды могут быть отредактированы
только сотрудником с правами суперпользователя.</p>
<div class="section" id="index-41">
<span id="id44"></span><h3><a class="toc-backref" href="#id114">Поля таблицы Известных видов</a><a class="headerlink" href="#index-41" title="Ссылка на этот заголовок">¶</a></h3>
<div class="section" id="id45">
<h4><a class="toc-backref" href="#id115">Название</a><a class="headerlink" href="#id45" title="Ссылка на этот заголовок">¶</a></h4>
<p>Название вида – это видовой эпитет. Значение поля
хранится в нижнем регистре. Если Вы введете в данное поле, например,
<strong>Davurica</strong>, значение будет автоматически переведено в нижний регистр, т.е. <strong>davurica</strong>.
Недопустимо включать в данное поле авторов вида (хотя бы потому, что</p>
<blockquote>
<div>авторы записываются с учётом регистра).</div></blockquote>
</div>
<div class="section" id="id46">
<h4><a class="toc-backref" href="#id116">Авторство</a><a class="headerlink" href="#id46" title="Ссылка на этот заголовок">¶</a></h4>
<p>Авторство вида. Примеры (через точку с запятой): Maxim; L.; Kom.; (Moench) Mold.; Stephani
Данное поле хранится с учетом регистра.</p>
<p>В случае, если для видовой записи заданы подвидовой ранг и подвидовой эпитет авторство относится
к объекту, состоящиму из (названия рода, видового эпитета, подвидового ранга, подвидового эпитета).</p>
</div>
<div class="section" id="id47">
<h4><a class="toc-backref" href="#id117">Род</a><a class="headerlink" href="#id47" title="Ссылка на этот заголовок">¶</a></h4>
<p>Название рода. Должно выбираться из выпадающего списка предложенных названий.
Если нужное наименование рода отсутствует,
его необходимо добавить в систему нажав «Добавить/add» (кнопка «зеленый плюс»
справа от поля; кнопка может отсутствовать,
если Ваш уровень прав не позволяет добавлять <strong>Рода</strong>);</p>
</div>
<div class="section" id="id48">
<h4><a class="toc-backref" href="#id118">Подвидовой ранг</a><a class="headerlink" href="#id48" title="Ссылка на этот заголовок">¶</a></h4>
<p>Возможные значения данного поля: «subsp.», «subvar.», «var.», «f.», «subf.».</p>
<p>Если возникает необходимость определить подрод («subg.»),
поле подвидовой эпитет
используется для имени подрода, при этом не происходит
автоматического конвертирования имени в нижний регистр.</p>
</div>
<div class="section" id="id49">
<h4><a class="toc-backref" href="#id119">Подвидовой эпитет</a><a class="headerlink" href="#id49" title="Ссылка на этот заголовок">¶</a></h4>
<p>строка; используется совместно с полем <a class="reference internal" href="#id48">Подвидовой ранг</a>.
Должна быть пустой, если не задано поле <a class="reference internal" href="#id48">Подвидовой ранг</a>.</p>
</div>
<div class="section" id="id50">
<h4><a class="toc-backref" href="#id120">Статус</a><a class="headerlink" href="#id50" title="Ссылка на этот заголовок">¶</a></h4>
<p>Значение поля описано выше.</p>
</div>
<div class="section" id="index-42">
<span id="id51"></span><h4><a class="toc-backref" href="#id121">Синоним вида</a><a class="headerlink" href="#index-42" title="Ссылка на этот заголовок">¶</a></h4>
<p>Если синоним у вида отсутствует, поле должно быть пустым.
Синоним выбирается из выпадающего списка известных системе видов.
Если требуемый вид отсутствует, его
можно добавить используя кнопку «Добавить/add»
(«зеленый плюс» справа от поля);</p>
</div>
</div>
</div>
<div class="section" id="id52">
<h2><a class="toc-backref" href="#id122">Сообщения об ошибках</a><a class="headerlink" href="#id52" title="Ссылка на этот заголовок">¶</a></h2>
<p>Пользователи имеют возможность сообщить о замеченной ошибке в
уже опубликованных гербарных записях путем заполнения
специальной формы на персональной странице образца.</p>
<p>При отправке заполненной формы в специальной
таблице формируется запись со следующими полями:</p>
<div class="section" id="email">
<h3><a class="toc-backref" href="#id123">Email</a><a class="headerlink" href="#email" title="Ссылка на этот заголовок">¶</a></h3>
<p>Электронный адрес отправителя сообщения об ошибке;
данное поле может быть незаполнено.</p>
</div>
<div class="section" id="id53">
<h3><a class="toc-backref" href="#id124">Описание</a><a class="headerlink" href="#id53" title="Ссылка на этот заголовок">¶</a></h3>
<p>Содержание сообщения об ошибке. Поле обязательно для заполнения.
Его максимальная длина 2000 символов.</p>
</div>
<div class="section" id="id54">
<h3><a class="toc-backref" href="#id125">Статус</a><a class="headerlink" href="#id54" title="Ссылка на этот заголовок">¶</a></h3>
<p>Текущий статус сообщения об ошибке. По умолчанию назначаемый статус для
новых сообщений – <cite>NEW</cite>. Возможные значения статуса
— <cite>NEW</cite>, <cite>IN PROGRESS</cite>, <cite>FIXED</cite>.</p>
<div class="section" id="id55">
<h4><a class="toc-backref" href="#id126">Порядок обработки сообщений об ошибках</a><a class="headerlink" href="#id55" title="Ссылка на этот заголовок">¶</a></h4>
<p>Сообщения об ошибках видны в панеле администрирования всем,
имеющим доступ к редактированию гербария.</p>
<p>Просматривая сообщения об ошибках, можно увидеть
детализацию ошибки, нажав на номер
сообщения (колонка <cite>ID</cite>), либо перейти к редактированию
гербарной записи, связанному
с сообщением (ссылки вида <cite>Редактировать запись XXXX</cite>).
Если у пользователя имеются
права на редактирование гербарной записи,
то переход по ссылке приведет на страницу редактирования образца.
В противном случае появится сообщение, что «страница не найдена».</p>
<p>Если ошибки в гербарной записи исправлены, это отмечается изменением
статуса сообщения об ошибке, при этом: статус <cite>FIXED</cite> устанавливается,
если больше не требуется никаких исправлений; статус
<cite>IN PROGRESS</cite> –  устанавливается, если процесс внесения изменений
уже начат, но еще не закончен, и в скором времени планируется вернуться
к редактированию данной гербарной записи.</p>
<p>Если гербарная запись имеет необработанные сообщения об ошибках
(т.е. сообщения, имеющие статусы <cite>NEW</cite> или <cite>IN PROGRESS</cite>),
то в верхней части ее персональной страницы выводится примечание, что
гербарная запись (возможно) содержит неисправленные ошибки.
Поэтому, после выполнения редактирования образца,
важно устанавливать статус связанного с ним сообщения об
ошибке в позицию <cite>FIXED</cite>.</p>
<p>Удалить сообщение об ошибке, а также отредактировать
содержание текста ошибки, или e-mail адрес отправителя сообщения,
может только человек с правами суперпользователя.</p>
</div>
</div>
</div>
<div class="section" id="id56">
<h2><a class="toc-backref" href="#id127">Оповещение кураторов и отслеживание изменений</a><a class="headerlink" href="#id56" title="Ссылка на этот заголовок">¶</a></h2>
<p>Система управления гербарием позволяет отслеживать изменения при заполнении
формы редактирования гербарных записей. Такое отслеживание
особенно важно в отношении введения новых, ранее не встречавшихся в базе, значений.
Если в некоторое поле введено ранее не встречавшееся в базе значение,
то это может свидетельствовать о допущенной ошибке как принципиальной,
так и в результате смены стиля заполнения поля (например, поле может быть
заполнено как &lt;Иванов И.И.&gt; или &lt;И.И. Иванов&gt;.</p>
<p>Таким образом, система отслеживания направлена на снижение числа возможных ошибок при
заполнении электронного гербария и унификацию стиля введения данных.</p>
<div class="section" id="id57">
<h3><a class="toc-backref" href="#id128">Принцип работы подсистемы</a><a class="headerlink" href="#id57" title="Ссылка на этот заголовок">¶</a></h3>
<p>Настройки работы подсистемы оповещения определяются переменными
(и их значениями по умолчанию):</p>
<blockquote>
<div><ul class="simple">
<li><cite>TRACKED_FIELDS=(„collectedby“, „identifiedby“)</cite></li>
<li><cite>NOTIFICATION_MAILS = („kislov&#64;botsad.ru“, )</cite></li>
<li><cite>NOTIFICATION_USERS = („scidam“, )</cite></li>
<li><cite>EXCLUDED_FROM_NOTIFICATION = („“, )</cite></li>
</ul>
</div></blockquote>
<p><cite>TRACKED_FIELDS</cite> – поля, отслеживаемые системой; названия полей
указываются через запятую и должны иметь в точности такие названия,
которые используются в базе данных (на низком уровне);</p>
<p><cite>NOTIFICATION_MAILS</cite> – перечень адресов электронной почты,
на которые могут приходить оповещения;</p>
<p><cite>NOTIFICATION_USERS</cite> – перечень пользователей-кураторов
акронимов/подразделов гербария, которым могут приходить оповещения;</p>
<p><cite>EXCLUDED_FROM_NOTIFICATION</cite> –  перечень имен пользователей,
заполнение полей которыми не вызывает создание оповещения в любом случае.
Если гербарная запись создана пользователем, указанным в данном списке,
эта запись полностью игнорируется системой и никакого оповещения не генерируется.</p>
<p>Система может поддерживать различные правила генерации оповещений. В текущей версии
оповещение создается, <strong>если значение в отслеживаемом поле</strong> (<cite>TRACKED_FIELDS</cite>)
<strong>не содержится на текущий момент в базе данных</strong>.</p>
<p>Пример оповещения приведен на (<a class="reference internal" href="#main-pic3"><span class="std std-ref">Рис. 3</span></a>).</p>
<div class="figure align-center" id="id66">
<span id="main-pic3"></span><img alt="Вид сообщения-оповещения" src="_images/Screenshot_20180626_163427.png" />
<p class="caption"><span class="caption-text">Рис. 3. Пример сообщения-оповещения</span></p>
</div>
<ul class="simple">
<li>в колонке <cite>ID</cite> указывается <strong>ID</strong> гербарной записи,
к которой данное сообщение относится;</li>
<li>в колонке <cite>USERNAME</cite> указывается имя пользователя,
который вызвал данное сообщение (ввел ранее не встречавшееся значение в поле);</li>
<li>в колонке <cite>DATE</cite> приводится дата создания оповещения;
с точностью до долей секунды эта дата соответствует времени сохранения гербарной записи;</li>
<li>в колонке <cite>REASON</cite> указывается причина возникновения сообщения;
здесь перечисляются поля и их значения, которые вызвали данное оповещение;</li>
<li>в колонке <cite>LINK</cite> приводится ссылка для быстрого редактирования образца,
которому соответствует данное оповещение (для редактирования требуется авторизация в системе).</li>
</ul>
</div>
</div>
<div class="section" id="id58">
<h2><a class="toc-backref" href="#id129">Множественное редактирование базы данных</a><a class="headerlink" href="#id58" title="Ссылка на этот заголовок">¶</a></h2>
<p>При заполнении базы данных в отношении некоторых полей работает сервис формирования
подсказок, выводящий список ранее набранных значений в данном поле, что упрощает
заполнение базы. Однако, это может приводить к накоплению единообразных ошибок. Например,
если когда-либо поле было заполнено неверно, и ошибочно набранное значение
используется в дальнейшем, это может привести к большому числу записей с неверно
заполненным полем. Для того, чтобы исправлять подобные единообразные ошибки
целесообразно использовать сервис множественного редактирования базы данных,
который позволяет за один раз внести исправления в определенном
поле базы данных, применяя операцию ко всем записям либо данного акронима,
либо подраздела, либо ко всей базе данных.</p>
<div class="section" id="id59">
<h3><a class="toc-backref" href="#id130">Принцип работы</a><a class="headerlink" href="#id59" title="Ссылка на этот заголовок">¶</a></h3>
<p>Для того, чтобы воспользоваться сервисом пользователь должен обладать правами
куратора (акронима или подраздела гербария), а также специальным набором прав,
регламентирующим возможность множественных изменений.</p>
<p>При наличии таких прав для определенных полей формы редактирования гербарных записей
появляется дополнительная ссылка (<a class="reference internal" href="#main-pic4"><span class="std std-ref">Рис. 4</span></a>), позволяющая перейти
на страницу внесения множественных изменений.</p>
<div class="figure align-center" id="id67">
<span id="main-pic4"></span><img alt="Ссылка на выполнение множественных изменений" src="_images/Screenshot_20180723_133118.png" />
<p class="caption"><span class="caption-text">Рис. 4. Ссылка множественного редактирования</span></p>
</div>
<p>Множественное изменение доступно только для полей базы данных, перечисленных
в переменной (см. <a class="reference external" href="https://github.com/VBGI/herbs/blob/master/herbs/conf.py">файл конфигурации</a>):</p>
<ul class="simple">
<li>ALLOWED_FOR_BULK_CHANGE = („region“, „district“, „collectedby“, „identifiedby“, „detailed“, „note“),</li>
</ul>
<p>В текущей конфигурации это соответствует полям
<a class="reference internal" href="#id24">Регион</a>, <a class="reference internal" href="#id25">Район</a>, <a class="reference internal" href="#id29">Собрали</a>, <a class="reference internal" href="#id31">Определили</a>, <a class="reference internal" href="#id26">Место сбора</a>, <a class="reference internal" href="#id35">Заметки</a>.</p>
<p>При нажатии на сслыку <em>Apply bulk changes</em> <a class="reference internal" href="#main-pic5"><span class="std std-ref">Рис. 5</span></a> появится окно следующего вида:</p>
<div class="figure align-center" id="id68">
<span id="main-pic5"></span><img alt="Окно сервиса множественного редактирования" src="_images/Screenshot_20180723_140549.png" />
<p class="caption"><span class="caption-text">Рис. 5. Интерфейс сервиса множественного редактирования</span></p>
</div>
<p>При этом поле <strong>Поле</strong> не редактируется, содержит наименование поля,
значения в котором необходимо изменить.</p>
<p>Поле <strong>Текущее значение</strong> содержит значение для поиска. Будет произведен поиск всех гербарных
записей, у которых в <strong>Поле</strong> введено <strong>Текущее значение</strong>. Этот <strong>Набор записей</strong> –
кандидатов на изменение.</p>
<p>Поле <strong>Искать как включение (подстроку)</strong> означает, что будет произведен поиск всех гербарных
записей, у которых <strong>Поле</strong> содержит в качестве подстроки <strong>Текущее значение</strong>.</p>
<p>В случае, если отмечено <strong>Не учитывать регистр</strong>, поиск записей будет
производиться без учета регистра.</p>
<p><strong>Новое значение</strong> – значение, которым будет перезаписано <strong>Текущее значение</strong>
в <strong>Наборе записей</strong>.</p>
<p>Поле <strong>Название поля (повторить)</strong> требует вручную набрать содрежимое поля <strong>Поле</strong> –
т.е. название изменяемого поля. Это сделано для безопасности: пользователь должен
быть уверен в том, что он делает.</p>
<p>При нажатии кнопки <strong>Запрос</strong> происходит проверка полномочий пользователя (принадлежность
акрониму, гербарным подразделам). Если какой-либо непустой <strong>Набор записей</strong>,
удовлетворяющий условиям поиска (<strong>Поле</strong>/<strong>Текущее значение</strong>) был найден,
диалоговое окно расширяется и приобретает вид <a class="reference internal" href="#main-pic6"><span class="std std-ref">Рис. 6</span></a>:</p>
<div class="figure align-center" id="id69">
<span id="main-pic6"></span><img alt="Окно сервиса множественного редактирования" src="_images/Screenshot_20180723_141251.png" />
<p class="caption"><span class="caption-text">Рис. 6. Уточнение сферы распространения изменений</span></p>
</div>
<p>Для продолжения необходимо выбрать акронимы и/или подразделы гербария, в отношении
записей которых будут применены изменения. Перечень акронимов и подразделов
формируется исходя из прав пользователя. Если пользователь, куратор определенного акронима,
например, <strong>VBGI</strong>, то в перечне будет только один вариант <strong>VBGI (Botanical Garden-Institute FEB RAS)</strong>.
В случае, если пользователь обладает правами суперпользователя, выводятся все (<a class="reference internal" href="#main-pic6"><span class="std std-ref">Рис. 6</span></a>)
поддерживаемые системой акронимы и гербарные подразделы.</p>
<p>Далее, пользователю необходимо выбрать один, или несколько акронимов,
в рамках которых планируется применить изменения <a class="reference internal" href="#main-pic7"><span class="std std-ref">Рис. 7</span></a>.</p>
<div class="figure align-center" id="id70">
<span id="main-pic7"></span><img alt="Выбор акронимов и подразделов гербария для изменений" src="_images/Screenshot_20180723_142124.png" />
<p class="caption"><span class="caption-text">Рис. 7. Выбор акронимов и подразделов гербария для изменения</span></p>
</div>
<p>Каждый раз, когда пользователь отмечает новый акроним/гербарный подраздел,
производится пересчет числа записей-кандидатов на изменение. Если это число отлично от нуля,
становится доступной кнопка <strong>Применить</strong>, нажатие на которую применяет
изменения по следующей схеме:</p>
<ul class="simple">
<li>если поля <strong>Искать как включение (подстроку)</strong> и <strong>Не учитывать регистр</strong> не отмечены, то
изменения производятся у всех записей, у которых содержимое <strong>Поля</strong>
в точности совпадает с <strong>Текущим значением</strong>; при этом  содержимое <strong>Поля</strong>
в базе данных заменяется <strong>Новым значением</strong>;</li>
<li>если поле <strong>Искать как включение (подстроку)</strong> не отмечено, а поле
<strong>Не учитывать регистр</strong> отмечено, то изменения каснутся только тех записей,
у которых содержимое <strong>Поля</strong> с точностью до регистра (т.е. без учета регистра)
совпадает с <strong>Текущим значением</strong>;</li>
<li>если поле <strong>Искать как включение (подстроку)</strong> отмечено,
а поле <strong>Не учитывать регистр</strong> не отмечено, то будет произведен поиск всех записей,
содержимое <strong>Поля</strong> у которых включает <strong>Текущее значение</strong> как подстроку (с учетом регистра);
изменение значений в этом случае предполагает замену соответствующей подстроки <strong>Новым значением</strong>;</li>
<li>если отмечены оба поля <strong>Искать как включение (подстроку)</strong> и <strong>Не учитывать регистр</strong>,
то будет произведен поиск всех записей, содержимое <strong>Поля</strong> у которых включает <strong>Текущее значение</strong>
как подстроку без учета регистра; изменения базы данных в этом случае предполагает
замену встретившихся подстрок <strong>Новыми значениями</strong>.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p>Пример</p>
<p>Допустим имеется поле <strong>Регион</strong> (region) и несколько гербарных записей, со следующими
значениями <em>Приморский край</em>, <em>Хабаровский край</em>, <em>Сахалинская область</em>.</p>
<p class="last">Пусть значение поля <strong>Текущее значение</strong> равно <code class="code docutils literal"><span class="pre">ай</span></code>, а <strong>Новое значение</strong> равно
<code class="code docutils literal"><span class="pre">ая</span></code>;
Тогда, если поле <strong>Искать как включение (подстроку)</strong> отмечено, то применение
замены приведет к записям со значениями <em>Приморский края</em>, <em>Хабаровский края</em>, <em>Сахалинская область</em>
соответственно.</p>
</div>
<p>Следует помнить, что:</p>
<ul class="simple">
<li>Если поле <strong>Искать как включение (подстроку)</strong> отмечено,
то <strong>Текущее значение</strong> должно содержать по крайней мере 5 символов;
это сделано, чтобы избежать эффекта, при котором
поиск подстрок малой длины может приводить к большому числу гербарных записей;</li>
<li>Содержимое поля <strong>Новое значение</strong> подвергается обработке перед записью,
а именно, удаляются лишние пробелы в начале и конце строки,
если таковые были введены;</li>
</ul>
</div>
</div>
<div class="section" id="id61">
<h2><a class="toc-backref" href="#id131">Изображения</a><a class="headerlink" href="#id61" title="Ссылка на этот заголовок">¶</a></h2>
<p>Подготовка изображений для привязки их к
гербарным образцам регламентируется отдельным <a class="reference internal" href="scanning.html"><span class="doc">документом</span></a>.</p>
</div>
<div class="section" id="id62">
<h2><a class="toc-backref" href="#id132">Замечания по работе подсистемы автозаполнения</a><a class="headerlink" href="#id62" title="Ссылка на этот заголовок">¶</a></h2>
<p>При заполнении данных в форме редактирования гербарной записи определенные поля
<a class="reference internal" href="#id23">Страна</a>, <a class="reference internal" href="#id24">Регион</a>, <a class="reference internal" href="#id25">Район</a>, <a class="reference internal" href="#id29">Собрали</a>, <a class="reference internal" href="#id31">Определили</a> автоматически формируют
всплывающую подсказку, исходя из уже имеющихся в базе данных.
При этом список подсказок для поля <a class="reference internal" href="#id23">Страна</a> фиксирован и не зависит от уже
присвоенных наименований стран для внесенных гербарных образцов в базу. Подсказки для
полей <a class="reference internal" href="#id24">Регион</a>, <a class="reference internal" href="#id25">Район</a>, <a class="reference internal" href="#id29">Собрали</a>, <a class="reference internal" href="#id31">Определили</a> формируются на основе введенных
гербарных данных, при этом, однако, используются образцы только
текущего гербарного акронима, под которым авторизован пользователь в данный момент
заполнящий базу. Таким образом, если, например, в гербарии с акронимом ABGI не содержится
записей с регионом «Приморский край», а в гербарии с акронимом VBGI такие образцы имеются,
то при заполнении поля <a class="reference internal" href="#id24">Регион</a> от пользователя ABGI подсказка «Приорский край» не будет высвечиваться,
в то время как при заполнении пользователем от акронима VBGI такая подсказка будет сформирована.
Следует отметить, что когда 2 и более образцов с регионом «Приморский край» будут
внесены в базу ABGI, то название этого региона в дальнейшем будет высвечиваться и
для пользователей ABGI гербария.
Дополнительно, при формировании подсказок применяются следующие правила: 1) используются только
гербарные записи, которые были созданы не позднее (по умолчанию) 180 дней от текущей даты (число дней регулируется
параметром <cite>DAYS_TO_REMEMBER</cite>, см. <a class="reference external" href="https://github.com/VBGI/herbs/blob/master/herbs/conf.py">файл конфигурации</a>);
2) название объекта включается в подсказку, если оно уже по крайней мере более одного раза встречалось в базе.
Данные правила призваны минимизировать повторение ошибок за счет выбора из подсказки
ранее неправильно набранного названия региона/района/фамилии и т.п.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/bgi_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Оглавление</a></h3>
  <ul>
<li><a class="reference internal" href="#">Администрирование электронного гербария БСИ ДВО РАН</a><ul>
<li><a class="reference internal" href="#id3">Введение</a><ul>
<li><a class="reference internal" href="#index-0">Аутентификация и безопасность</a></li>
</ul>
</li>
<li><a class="reference internal" href="#index-1">Структура электронного гербария</a><ul>
<li><a class="reference internal" href="#index-2">Гербарные акронимы</a></li>
<li><a class="reference internal" href="#index-3">Подразделы гербария</a></li>
<li><a class="reference internal" href="#index-4">Группы пользователей и права</a></li>
<li><a class="reference internal" href="#id9">Суперпользователь</a><ul>
<li><a class="reference internal" href="#index-5">Куратор</a></li>
<li><a class="reference internal" href="#index-6">Куратор подраздела гербария</a></li>
<li><a class="reference internal" href="#index-7">Регулярный пользователь (наборщик)</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#index-8">Поля формы и их назначение</a><ul>
<li><a class="reference internal" href="#index-9">Поддержка альтернативного языка</a></li>
<li><a class="reference internal" href="#index-10">Вид</a></li>
<li><a class="reference internal" href="#index-11">Примечание к виду</a></li>
<li><a class="reference internal" href="#index-12">Типовой статус</a></li>
<li><a class="reference internal" href="#index-13">Сходство</a></li>
<li><a class="reference internal" href="#index-14">Код образца</a></li>
<li><a class="reference internal" href="#index-15">Полевой код</a></li>
<li><a class="reference internal" href="#index-16">Акроним</a></li>
<li><a class="reference internal" href="#index-17">Дубликаты</a></li>
<li><a class="reference internal" href="#index-18">Страна</a></li>
<li><a class="reference internal" href="#index-19">Регион</a></li>
<li><a class="reference internal" href="#index-20">Район</a></li>
<li><a class="reference internal" href="#index-21">Место сбора</a></li>
<li><a class="reference internal" href="#index-22">Координаты</a></li>
<li><a class="reference internal" href="#index-23">Высота</a></li>
<li><a class="reference internal" href="#gps-based">GPS-Based</a></li>
<li><a class="reference internal" href="#index-25">Собрали</a></li>
<li><a class="reference internal" href="#index-26">Начало и Конец сбора</a></li>
<li><a class="reference internal" href="#index-27">Определили</a></li>
<li><a class="reference internal" href="#index-28">Начало и конец определения</a></li>
<li><a class="reference internal" href="#index-29">Биоморфологический статус</a></li>
<li><a class="reference internal" href="#index-30">Подраздел гербария</a></li>
<li><a class="reference internal" href="#index-31">Заметки</a></li>
<li><a class="reference internal" href="#index-32">Опубликовано</a></li>
<li><a class="reference internal" href="#index-33">Переопределения</a></li>
<li><a class="reference internal" href="#index-34">Дополнительные виды</a></li>
<li><a class="reference internal" href="#c">Cохранить для добавления следующей записи</a></li>
</ul>
</li>
<li><a class="reference internal" href="#index-36">Персональная страница образца</a></li>
<li><a class="reference internal" href="#index-37">Этикетка</a></li>
<li><a class="reference internal" href="#index-38">Этикетка-Конверт</a></li>
<li><a class="reference internal" href="#index-39">Штрихкодирование образцов</a></li>
<li><a class="reference internal" href="#index-40">Известные виды</a><ul>
<li><a class="reference internal" href="#index-41">Поля таблицы Известных видов</a><ul>
<li><a class="reference internal" href="#id45">Название</a></li>
<li><a class="reference internal" href="#id46">Авторство</a></li>
<li><a class="reference internal" href="#id47">Род</a></li>
<li><a class="reference internal" href="#id48">Подвидовой ранг</a></li>
<li><a class="reference internal" href="#id49">Подвидовой эпитет</a></li>
<li><a class="reference internal" href="#id50">Статус</a></li>
<li><a class="reference internal" href="#index-42">Синоним вида</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id52">Сообщения об ошибках</a><ul>
<li><a class="reference internal" href="#email">Email</a></li>
<li><a class="reference internal" href="#id53">Описание</a></li>
<li><a class="reference internal" href="#id54">Статус</a><ul>
<li><a class="reference internal" href="#id55">Порядок обработки сообщений об ошибках</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id56">Оповещение кураторов и отслеживание изменений</a><ul>
<li><a class="reference internal" href="#id57">Принцип работы подсистемы</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id58">Множественное редактирование базы данных</a><ul>
<li><a class="reference internal" href="#id59">Принцип работы</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id61">Изображения</a></li>
<li><a class="reference internal" href="#id62">Замечания по работе подсистемы автозаполнения</a></li>
</ul>
</li>
</ul>

  <h4>Предыдущий раздел</h4>
  <p class="topless"><a href="http_api.html"
                        title="предыдущая глава">Автоматизация поиска гербарных записей в базе данных</a></p>
  <h4>Следующий раздел</h4>
  <p class="topless"><a href="scanning.html"
                        title="следующая глава">Подготовка и загрузка гербарных изображений</a></p>
  <div role="note" aria-label="source link">
    <h3>Эта страница</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/main.rst.txt"
            rel="nofollow">Исходный текст</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Быстрый поиск</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Искать" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Навигация</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Алфавитный указатель"
             >указатель</a></li>
        <li class="right" >
          <a href="scanning.html" title="Подготовка и загрузка гербарных изображений"
             >вперёд</a> |</li>
        <li class="right" >
          <a href="http_api.html" title="Автоматизация поиска гербарных записей в базе данных"
             >назад</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Документация Электронный гербарий </a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Dmitry E. Kislov.
      Создано с помощью <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.
    </div>
  </body>
</html>